<!DOCTYPE html>
<html>
<body>
    <h1>ratgdo esp web installer</h1>
	<script src="jquery-3.6.0.min.js"></script>
	<script
	  type="module"
	  src="https://unpkg.com/esp-web-tools@9.0.5/dist/web/install-button.js?module"
	></script>
	<style type="text/css">
		* {
			font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
		}
	</style>
	
	<label for="selectManifest">Choose version:</label>
	<select id="selectManifest" onchange="setManifest()">
		<optgroup label="White 2.0 Boards Only">
			<option value="flasher/manifest.json">ratgdo v2.1</option>
			<option value="flasher/manifest_no_wifi.json">ratgdo v2.1 (WiFi disabled)</option>
			<option value="flasher/manifest_alpha.json">ratgdo v2.1b</option>
		</optgroup>
		<optgroup label="Blue 1.0 Boards Only">
			<option value="flasher/manifest_v1.json">ratgdo v1.7</option>
			<option value="flasher/manifest_no_wifi_v1.json">ratgdo v1.7 (WiFi disabled)</option>
		</optgroup>
		<!-- <option value="flasher/manifest_alpha.json">ratgdo v1.71a</option> -->
	</select>

	<br/>
	<p><strong>Note:</strong> <em>Erase Device</em> will erase your configuration and last used rolling code counter. 
		<strong>Before</strong> you use this option, open the <em>Logs & Console</em>, send a command to your opener and 
		take note of the last used counter. Then after flashing, send an mqtt <em>set_code_counter</em> command to restore the counter value and then <em>sync</em> with the opener. <a href="01_features.html">See docs</a>.</p>

    <esp-web-install-button manifest="" id="manifest"></esp-web-install-button>
	<script>
		var manifest = $("#manifest").attr("manifest",`flasher/manifest.json`);

		function setManifest(){
			$("#manifest").attr("manifest",$("#selectManifest").val());
		}
	</script>
</body>
</html>
